<div class="col-md-5 col-lg-4 order-md-last">
                    <h4 class="d-flex justify-content-between align-items-center mb-3">
                        <span class="text-primary">Cart</span>
                        <span class="badge badge-primary badge-pill text-white">{{ cart_item.sum_total }}</span>
                    </h4>
                    <ul class="list-group mb-3">
                        {% for cart_item in cart_items %}
                            <li class="list-group-item d-flex justify-content-between lh-sm">
                                <div>
                                    <h6 class="my-0">{{ cart_item.product.name }}</h6>
                                </div>
                            </li>
                            <li class="list-group-item d-flex justify-content-between lh-sm">
                                <div>
                                    <small class="text-muted">{{ counter }} шт.</small>
                                </div>
                            </li>
                            <li class="list-group-item d-flex justify-content-between lh-sm">
                                <div>
                                    <span class="text-muted">{{ total }} руб.</span>
                                </div>
                            </li>
                        {% endfor %}
                        <li class="list-group-item d-flex justify-content-between">
                            <span>Amount payable</span>
                            <strong>{{ total }} руб.</strong>
                        </li>
                    </ul>
                </div>





def carts(request, total=0, counter=0, cart_items=None):
    cart = Cart.objects.get(cart_id=_cart_id(request), user=request.user)
    cart_items = CartItem.objects.filter(cart=cart, active=True)
    for cart_item in cart_items:
        total += (cart_item.product.price * cart_item.quantity)
        counter += cart_item.quantity
    return {'cart_items': cart_items, 'total': total, 'counter': counter}